<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Sport Shoes - Reset Password</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" >
<link href="/font-awesome/css/fontawesome.min.css" rel="stylesheet" />
<link href="/font-awesome/css/brands.min.css" rel="stylesheet" />
<link href="/font-awesome/css/solid.min.css" rel="stylesheet" />
<script src="/bootstrap/css/bootstrap.js"></script>
<script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
<style th:replace="fragments/style"></style>
</head>
<body>
	<div th:replace="fragments/header"></div>

	<div class="container">
		<div class="mt-3 d-flex justify-content-center h-100">
			<div class="card">
				<div class="card-header">
					<h3>Reset Your Password</h3>
				</div>
				<div class="card-body">
					<form class="needs-validation" th:action="@{/reset_password}"
						method="post" style="max-width: 350px; margin: 0 auto;" novalidate>
						<div th:if="${message}" class="alert alert-success"
							th:text="${message}"></div>
						<input type="hidden" name="token" th:value="${token}" />
						<div class="border border-secondary rounded p-3">
							<div>
								<div class="mb-3">
									<input type="password" name="password" id="password"
										class="form-control" placeholder="Enter your new password"
										required autofocus minlength=5 maxlength=10/>
									<div class="invalid-feedback">Please enter a valid
										Password</div>
									<div class="text-danger" th:if="${password}"
										th:text="${password}"></div>
								</div>
								<div class="mb-3">
									<input type="password" class="form-control"
										placeholder="Confirm your new password" name="confirmpassword"
										required oninput="checkPasswordMatch(this);" minlength=5 maxlength=15/>
									<div class="invalid-feedback">Please enter a valid
										Confirm Password</div>
									<div class="text-danger" th:if="${confirmpassword}"
										th:text="${confirmpassword}"></div>
									<div class="text-danger" th:if="${matchpassword}"
										th:text="${matchpassword}"></div>
								</div>

								<p class="text-center">
									<input type="submit" value="Change Password"
										class="btn btn-primary" />
								</p>
							</div>
						</div>
					</form>
				</div>
				<script type="text/javascript">
					function checkPasswordMatch(fieldConfirmPassword) {
						var password = document.getElementById("password").value;
						if (fieldConfirmPassword.value != password) {
							fieldConfirmPassword
									.setCustomValidity("Passwords do not match!");
						} else {
							fieldConfirmPassword.setCustomValidity("");
						}
					}
					'use strict'
					var form = document.querySelector('.needs-validation')

					form.addEventListener('submit', function(event) {
						if (!form.checkValidity()) {
							event.preventDefault()
							event.stopPropagation()
						}
						form.classList.add('was-validated')
					})
				</script>

				<!-- End Form Validation -->
				<div class="card-footer">
					<div class="d-flex justify-content-center links">
						Don't have an account?<a href="/register">Sign Up</a>
					</div>
					<div class="d-flex justify-content-center">
						Have an existing account?<a th:href="@{/login}">Login</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br>
	<br>
	<div th:replace="fragments/footer"></div>
</body>
</html>